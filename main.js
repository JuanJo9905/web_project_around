!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var o=function(){return e=function e(t,n,o,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.texto=t,this.enlaceImagen=n,this.enlaceIconoEliminar=o,this.plantilla=document.querySelector(r).content.cloneNode(!0),this._elementoCard=this.plantilla.querySelector(".content__grid-card"),this._handleCardClick=i,this._inicializarCard()},(n=[{key:"_inicializarCard",value:function(){this._agregarDatos(),this._agregarEventListeners()}},{key:"_agregarDatos",value:function(){this._elementoCard.querySelector(".content__grid-card-name").textContent=this.texto,this._elementoCard.querySelector(".content__grid-image").src=this.enlaceImagen,this._elementoCard.querySelector(".content__grid-image-delete").src=this.enlaceIconoEliminar}},{key:"_agregarEventListeners",value:function(){var e=this;this._elementoCard.querySelector(".content__grid-like").addEventListener("click",this._handleLikeClick.bind(this)),this._elementoCard.querySelector(".content__grid-image-delete").addEventListener("click",this._handleDeleteClick.bind(this)),this._elementoCard.querySelector(".content__grid-image").addEventListener("click",(function(){e._handleCardClick(e.enlaceImagen,e.texto)}))}},{key:"_handleLikeClick",value:function(e){e.target.classList.toggle("content__grid-like-active")}},{key:"_handleDeleteClick",value:function(e){e.currentTarget.parentNode.remove()}},{key:"obtenerElementoCard",value:function(){return this._elementoCard}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}(),r=o;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,u(o.key),o)}}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var c=function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._submitButton=this._formElement.querySelector(this._config.submitButtonSelector)},(t=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),n.textContent=t,n.classList.add(this._config.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.textContent="",t.classList.remove(this._config.errorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._submitButton.classList.add(this._config.inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._config.inactiveButtonClass),this._submitButton.disabled=!1)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),l=c;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,f(o.key),o)}}function f(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=s(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,d(o.key),o)}}function d(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=m(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}function y(e,t,n){return t=b(t),function(e,t){if(t&&("object"==m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},h.apply(null,arguments)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var S=function(e){function t(e,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=y(this,t,[e]))._handleFormSubmit=n,o._form=o._popup.querySelector(".popup__form"),o._inputList=o._form?o._form.querySelectorAll(".popup__input"):[],o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,(o=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;h(b(t.prototype),"setEventListeners",this).call(this),this._form?this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())})):console.log("Form element is not found.")}},{key:"close",value:function(){h(b(t.prototype),"close",this).call(this),this._form&&this._form.reset()}}])&&_(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this._closeModal=this._closeModal.bind(this),this.setEventListeners(),this._popupSaveButton=this._popup.querySelector(".popup__window-form-button"),this._popupCloseButton=this._popup.querySelector(".popup__close")},(t=[{key:"open",value:function(){this._popup.classList.add("popup__enabled"),this._popup.querySelector(".popup__overlay").addEventListener("click",this._closeModal),this._popupSaveButton.disabled=!0,document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup__enabled"),this._popup.querySelector(".popup__overlay").removeEventListener("click",this._closeModal),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_closeModal",value:function(){this.close()}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close").addEventListener("click",(function(){e.close()})),this._popup.addEventListener("mousedown",(function(t){t.target.classList.contains("popup")&&e.close()}))}}])&&p(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}());function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function w(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,k(o.key),o)}}function k(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=E(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}var C=function(){return e=function e(t){var n=t.nameSelector,o=t.jobSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(n),this._jobElement=document.querySelector(o)},(t=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.job;this._nameElement.textContent=t,this._jobElement.textContent=n}}])&&w(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),L={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};document.addEventListener("DOMContentLoaded",(function(){Array.from(document.querySelectorAll(L.formSelector)).forEach((function(e){new l(L,e).enableValidation()}))})),document.querySelector(".content__explorer"),document.querySelector(".content__grid");var j=[{name:"Valle de Yosemite",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/yosemite.jpg"},{name:"Lago Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lake-louise.jpg"},{name:"Montañas Calvas",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/latemar.jpg"},{name:"Parque Nacional de la Vanoise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/new-markets/WEB_sprint_5/ES/lago.jpg"}],q=document.querySelector(".content__grid");function P(e,t){var n=document.querySelector(".content__grid-poster"),o=n.querySelector(".content__grid-poster-close"),r=n.querySelector(".content__grid-poster-image"),i=n.querySelector(".content__grid-poster-name");r.src=e,r.alt=t,i.textContent=t,n.classList.add("content__grid-poster-enabled"),o.addEventListener("click",(function(){n.classList.remove("content__grid-poster-enabled")}))}document.addEventListener("DOMContentLoaded",(function(){j.forEach((function(e){var t=new r(e.name,e.link,"./images/Trash.svg","#content__grid",P);q.appendChild(t.obtenerElementoCard())}))}));var O=document.querySelector(".popup"),B=document.querySelector(".content__explorer-add-enable"),x=new S(".popup",R);B.addEventListener("click",(function(){x.open()}));var I=new C({nameSelector:".content__explorer-name",jobSelector:".content__explorer-job"}),T=document.querySelector("#edit"),V=(T.querySelector("#edit__window"),document.querySelector(".content__explorer-edit-enable")),D=new S("#edit",W);I.getUserInfo(),V.addEventListener("click",(function(){D.open()}));var M=O.querySelector(".popup__window-form-button"),z=T.querySelector("#edit__window-form-button");function R(){var e=O.querySelector("#popup__window-form-link"),t=O.querySelector("#popup__window-form-title"),n=new r(t.value,e.value,"./images/Trash.svg","#content__grid",P);q.appendChild(n.obtenerElementoCard()),e.value="",t.value="",O.classList.remove("popup__enabled")}function W(){var e=T.querySelector("#edit__window-form-name"),t=T.querySelector("#edit__window-form-title"),n=document.querySelector(".content__explorer-name"),o=document.querySelector(".content__explorer-job");n.textContent=e.value,o.textContent=t.value,T.classList.remove("popup__enabled")}M.addEventListener("click",R),z.addEventListener("click",W)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU1zQixFQUFXdEgsY0FBYyw0QkFFL0I4SCxFQUFlL0gsU0FBU0MsY0FBYywyQkFDdEMrSCxFQUFjaEksU0FBU0MsY0FBYywwQkFFekM4SCxFQUFhcEgsWUFBYzZELEVBQUtoRSxNQUNoQ3dILEVBQVlySCxZQUFjc0YsRUFBSXpGLE1BQzlCK0csRUFBV25HLFVBQVVJLE9BQU8saUJBQzVCLENBRUZvRyxFQUFTOUcsaUJBQWlCLFFBQVNzRyxHQUNuQ1MsRUFBUy9HLGlCQUFpQixRQUFTNEcsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHQvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvc2NyaXB0L0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdC9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9zY3JpcHQvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3NjcmlwdC9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IodGV4dG8sIGVubGFjZUltYWdlbiwgZW5sYWNlSWNvbm9FbGltaW5hciwgc2VsZWN0b3JQbGFudGlsbGEsIGhhbmRsZUNhcmRDbGljaykge1xyXG4gICAgdGhpcy50ZXh0byA9IHRleHRvO1xyXG4gICAgdGhpcy5lbmxhY2VJbWFnZW4gPSBlbmxhY2VJbWFnZW47XHJcbiAgICB0aGlzLmVubGFjZUljb25vRWxpbWluYXIgPSBlbmxhY2VJY29ub0VsaW1pbmFyO1xyXG4gICAgdGhpcy5wbGFudGlsbGEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yUGxhbnRpbGxhKS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHRoaXMuX2VsZW1lbnRvQ2FyZCA9IHRoaXMucGxhbnRpbGxhLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50X19ncmlkLWNhcmQnKTtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2luaWNpYWxpemFyQ2FyZCgpO1xyXG4gIH1cclxuXHJcbiAgLy8gTcOpdG9kbyBwcml2YWRvIHBhcmEgaW5pY2lhbGl6YXIgbGEgdGFyamV0YSBjb24gbG9zIGRhdG9zIHByb3BvcmNpb25hZG9zXHJcbiAgX2luaWNpYWxpemFyQ2FyZCgpIHtcclxuICAgIHRoaXMuX2FncmVnYXJEYXRvcygpO1xyXG4gICAgdGhpcy5fYWdyZWdhckV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICAvLyBNw6l0b2RvIHByaXZhZG8gcGFyYSBhZ3JlZ2FyIGxvcyBkYXRvcyBhIGxhIHRhcmpldGFcclxuICBfYWdyZWdhckRhdG9zKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudG9DYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50X19ncmlkLWNhcmQtbmFtZScpLnRleHRDb250ZW50ID0gdGhpcy50ZXh0bztcclxuICAgIHRoaXMuX2VsZW1lbnRvQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY29udGVudF9fZ3JpZC1pbWFnZScpLnNyYyA9IHRoaXMuZW5sYWNlSW1hZ2VuO1xyXG4gICAgdGhpcy5fZWxlbWVudG9DYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jb250ZW50X19ncmlkLWltYWdlLWRlbGV0ZScpLnNyYyA9IHRoaXMuZW5sYWNlSWNvbm9FbGltaW5hcjtcclxuICB9XHJcblxyXG4gIC8vIE3DqXRvZG8gcHJpdmFkbyBwYXJhIGFncmVnYXIgZGV0ZWN0b3JlcyBkZSBldmVudG9zXHJcbiAgX2FncmVnYXJFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGJvdG9uTGlrZSA9IHRoaXMuX2VsZW1lbnRvQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY29udGVudF9fZ3JpZC1saWtlJyk7XHJcbiAgICBib3Rvbkxpa2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVMaWtlQ2xpY2suYmluZCh0aGlzKSk7XHJcblxyXG4gICAgY29uc3QgaWNvbm9FbGltaW5hciA9IHRoaXMuX2VsZW1lbnRvQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY29udGVudF9fZ3JpZC1pbWFnZS1kZWxldGUnKTtcclxuICAgIGljb25vRWxpbWluYXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEZWxldGVDbGljay5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICBjb25zdCBpbWFnZW4gPSB0aGlzLl9lbGVtZW50b0NhcmQucXVlcnlTZWxlY3RvcignLmNvbnRlbnRfX2dyaWQtaW1hZ2UnKTtcclxuICAgIGltYWdlbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuZW5sYWNlSW1hZ2VuLCB0aGlzLnRleHRvKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gTcOpdG9kbyBwcml2YWRvIHBhcmEgbWFuZWphciBlbCBldmVudG8gZGUgY2xpY2sgZW4gZWwgYm90w7NuIGRlIGxpa2VcclxuICBfaGFuZGxlTGlrZUNsaWNrKGV2dCkge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdjb250ZW50X19ncmlkLWxpa2UtYWN0aXZlJyk7XHJcbiAgfVxyXG5cclxuICAvLyBNw6l0b2RvIHByaXZhZG8gcGFyYSBtYW5lamFyIGVsIGV2ZW50byBkZSBjbGljayBlbiBlbCBpY29ubyBkZSBlbGltaW5hclxyXG4gIF9oYW5kbGVEZWxldGVDbGljayhldnQpIHtcclxuICAgIGNvbnN0IGVsZW1lbnRvID0gZXZ0LmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZTtcclxuICAgIGVsZW1lbnRvLnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgLy8gTcOpdG9kbyBww7pibGljbyBxdWUgZGV2dWVsdmUgZWwgZWxlbWVudG8gY2FyZCBjb21wbGV0YW1lbnRlIGZ1bmNpb25hbCB5IGxsZW5vIGRlIGRhdG9zXHJcbiAgb2J0ZW5lckVsZW1lbnRvQ2FyZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50b0NhcmQ7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICAvLyBNw6l0b2RvIHByaXZhZG8gcGFyYSBtb3N0cmFyIGVsIG1lbnNhamUgZGUgZXJyb3JcclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgLy8gTcOpdG9kbyBwcml2YWRvIHBhcmEgb2N1bHRhciBlbCBtZW5zYWplIGRlIGVycm9yXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIC8vIE3DqXRvZG8gcHJpdmFkbyBwYXJhIGNvbXByb2JhciBsYSB2YWxpZGV6IGRlbCBjYW1wb1xyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gTcOpdG9kbyBwcml2YWRvIHBhcmEgY2FtYmlhciBlbCBlc3RhZG8gZGVsIGJvdMOzbiBTdWJtaXRcclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIE3DqXRvZG8gcHJpdmFkbyBwYXJhIGNvbXByb2JhciBzaSBhbGfDum4gY2FtcG8gZGUgZW50cmFkYSBlcyBpbnbDoWxpZG9cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgLy8gTcOpdG9kbyBwcml2YWRvIHBhcmEgYWdyZWdhciB0b2RvcyBsb3MgY29udHJvbGFkb3JlcyBuZWNlc2FyaW9zXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gTcOpdG9kbyBww7pibGljbyBxdWUgYWN0aXZhIGxhIHZhbGlkYWNpw7NuIGRlbCBmb3JtdWxhcmlvXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTsgIC8vIExsYW1hZGEgYWwgY29uc3RydWN0b3IgZGUgbGEgY2xhc2UgcGFkcmUgUG9wdXBcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0OyAgLy8gR3VhcmRhciBlbCBjYWxsYmFjayBkZSBlbnbDrW8gZGVsIGZvcm11bGFyaW9cclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTsgIC8vIFNlbGVjY2lvbmFyIGVsIGZvcm11bGFyaW8gZGVudHJvIGRlbCBwb3B1cFxyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fZm9ybSA/IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpIDogW107ICAvLyBTZWxlY2Npb25hciB0b2RvcyBsb3MgaW5wdXRzIGRlbCBmb3JtdWxhcmlvXHJcbiAgfVxyXG4gIC8vIE3DqXRvZG8gcGFyYSBvYnRlbmVyIGxvcyB2YWxvcmVzIGRlIGxvcyBpbnB1dHMgZGVsIGZvcm11bGFyaW9cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICAvLyBNw6l0b2RvIHBhcmEgYcOxYWRpciBldmVudCBsaXN0ZW5lcnNcclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICBpZiAodGhpcy5fZm9ybSkge1xyXG4gICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdGb3JtIGVsZW1lbnQgaXMgbm90IGZvdW5kLicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gTcOpdG9kbyBwYXJhIGNlcnJhciBlbCBwb3B1cCB5IHJlc2V0ZWFyIGVsIGZvcm11bGFyaW9cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICBpZiAodGhpcy5fZm9ybSkge1xyXG4gICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xyXG4iLCJjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fY2xvc2VNb2RhbCA9IHRoaXMuX2Nsb3NlTW9kYWwuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cFNhdmVCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX193aW5kb3ctZm9ybS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIik7XHJcbiAgfVxyXG5cclxuICAvLyBNw6l0b2RvIHDDumJsaWNvIHBhcmEgYWJyaXIgZWwgcG9wdXBcclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfX2VuYWJsZWQnKTtcclxuICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX292ZXJsYXlcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2Nsb3NlTW9kYWwpO1xyXG4gICAgdGhpcy5fcG9wdXBTYXZlQnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICAvLyBNw6l0b2RvIHDDumJsaWNvIHBhcmEgY2VycmFyIGVsIHBvcHVwXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9fZW5hYmxlZCcpO1xyXG4gICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fb3ZlcmxheVwiKS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fY2xvc2VNb2RhbCk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgLy8gTcOpdG9kbyBwcml2YWRvIHBhcmEgY2VycmFyIGVsIHBvcHVwIGFsIGhhY2VyIGNsaWMgZW4gZWwgb3ZlcmxheVxyXG4gIF9jbG9zZU1vZGFsKCkge1xyXG4gICAgdGhpcy5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgLy8gTcOpdG9kbyBwcml2YWRvIHBhcmEgbWFuZWphciBlbCBjaWVycmUgZGVsIHBvcHVwIGFsIHB1bHNhciBsYSB0ZWNsYSBFc2NcclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIE3DqXRvZG8gcMO6YmxpY28gcGFyYSBhZ3JlZ2FyIGxvcyBldmVudCBsaXN0ZW5lcnNcclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vIEV2ZW50IGxpc3RlbmVyIHBhcmEgZWwgaWNvbm8gZGUgY2VycmFyXHJcbiAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEV2ZW50IGxpc3RlbmVyIHBhcmEgZWwgw6FyZWEgc29tYnJlYWRhIGRlbCBwb3B1cFxyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cCcpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwO1xyXG4iLCJjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgLy8gTcOpdG9kbyBwYXJhIG9idGVuZXIgbGEgaW5mb3JtYWNpw7NuIGRlbCB1c3VhcmlvXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy8gTcOpdG9kbyBwYXJhIGVzdGFibGVjZXIgbGEgaW5mb3JtYWNpw7NuIGRlbCB1c3VhcmlvXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvOyIsImltcG9ydCBDYXJkIGZyb20gXCIuL3NjcmlwdC9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuL3NjcmlwdC9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuL3NjcmlwdC9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9zY3JpcHQvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFwiLi9zdHlsZXMvaW5kZXguY3NzXCI7XHJcblxyXG4vKipcclxuICogTWFuZWpvIGRlIHZhbGlkYWNpb25lc1xyXG4gKi9cclxuXHJcbi8vIENvbmZpZ3VyYWNpw7NuIHBhcmEgbGEgdmFsaWRhY2nDs24gZGVsIGZvcm11bGFyaW9cclxuY29uc3QgY29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbi8vIEluc3RhbmNpYSBkZSBGb3JtVmFsaWRhdG9yIHBhcmEgY2FkYSBmb3JtdWxhcmlvIGVuIGxhIHDDoWdpbmFcclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcclxuICBmb3JtTGlzdC5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XHJcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbmNvbnN0IGV4cGxvcmVyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19leHBsb3JlclwiKTtcclxuY29uc3QgY2xvc2VNb2RhbCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gIHBvc3RlckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGVudF9fZ3JpZC1wb3N0ZXItZW5hYmxlZFwiKTtcclxufTtcclxuXHJcbmNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19ncmlkXCIpO1xyXG5cclxuLypcclxuICogQ2FyZ2EgbGFzIGltYWdlbmVzIGluaWNpYWxlcyBoYWNpZW5kbyB1c28gZGVsIHRlbXBsYXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBsb2FkSW1hZ2UoaW1nLCBuYW1lKSB7XHJcbiAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb250ZW50X19ncmlkXCIpLmNvbnRlbnQ7XHJcbiAgY29uc3QgY2FyZCA9IGNhcmRUZW1wbGF0ZVxyXG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudF9fZ3JpZC1jYXJkXCIpXHJcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudF9fZ3JpZC1pbWFnZVwiKS5zcmMgPSBpbWc7XHJcbiAgY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2dyaWQtaW1hZ2VcIikuYWx0ID0gbmFtZTtcclxuICBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudF9fZ3JpZC1pbWFnZS1kZWxldGVcIikuc3JjID0gXCIuL2ltYWdlcy9UcmFzaC5zdmdcIjtcclxuICBjYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudF9fZ3JpZC1jYXJkLW5hbWVcIikudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gIGNhcmRcclxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2dyaWQtbGlrZVwiKVxyXG4gICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNvbnRlbnRfX2dyaWQtbGlrZS1hY3RpdmVcIik7XHJcbiAgICB9KTtcclxuICBjYXJkXHJcbiAgICAucXVlcnlTZWxlY3RvcihcIi5jb250ZW50X19ncmlkLWltYWdlLWRlbGV0ZVwiKVxyXG4gICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgIGNvbnN0IGVsZW1lbnRvID0gZXZ0LmN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZTtcclxuICAgICAgZWxlbWVudG8ucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgY2FyZFxyXG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudF9fZ3JpZC1pbWFnZVwiKVxyXG4gICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgIGNvbnN0IGltYWdlID0gZXZ0LnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJzcmNcIik7XHJcbiAgICAgIGNvbnN0IG5hbWUgPSBldnQudGFyZ2V0LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBcIi5jb250ZW50X19ncmlkLWNhcmQtbmFtZVwiXHJcbiAgICAgICkudGV4dENvbnRlbnQ7XHJcbiAgICAgIGNvbnN0IHBvc3RlckltYWdlRWxlbWVudCA9IGdyaWRDb250YWluZXIucXVlcnlTZWxlY3RvcihcclxuICAgICAgICBcIi5jb250ZW50X19ncmlkLXBvc3Rlci1pbWFnZVwiXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IHBvc3Rlck5hbWVFbGVtZW50ID0gZ3JpZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgIFwiLmNvbnRlbnRfX2dyaWQtcG9zdGVyLW5hbWVcIlxyXG4gICAgICApO1xyXG4gICAgICBwb3N0ZXJJbWFnZUVsZW1lbnQuc3JjID0gaW1nO1xyXG4gICAgICBwb3N0ZXJJbWFnZUVsZW1lbnQuYWx0ID0gbmFtZTtcclxuICAgICAgcG9zdGVyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICBwb3N0ZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImNvbnRlbnRfX2dyaWQtcG9zdGVyLWVuYWJsZWRcIik7XHJcbiAgICAgIHBvc3RlckNvbnRhaW5lclxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2dyaWQtcG9zdGVyLW92ZXJsYXlcIilcclxuICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsb3NlTW9kYWwpO1xyXG4gICAgfSk7XHJcbiAgY2FyZHNDb250YWluZXIuYXBwZW5kKGNhcmQpO1xyXG59XHJcblxyXG5jb25zdCBpbml0aWFsSW1hZ2VzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFsbGUgZGUgWW9zZW1pdGVcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJNb250YcOxYXMgQ2FsdmFzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlBhcnF1ZSBOYWNpb25hbCBkZSBsYSBWYW5vaXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL3Zhbm9pc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmNvbnN0IGNvbnRlbmVkb3JfaW1hZ2VuZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2dyaWRcIik7XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICBpbml0aWFsSW1hZ2VzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgICAgZWxlbWVudFtcIm5hbWVcIl0sXHJcbiAgICAgIGVsZW1lbnRbXCJsaW5rXCJdLFxyXG4gICAgICBcIi4vaW1hZ2VzL1RyYXNoLnN2Z1wiLFxyXG4gICAgICBcIiNjb250ZW50X19ncmlkXCIsXHJcbiAgICAgIGhhbmRsZUNhcmRDbGlja1xyXG4gICAgKTtcclxuICAgIGNvbnRlbmVkb3JfaW1hZ2VuZXMuYXBwZW5kQ2hpbGQoY2FyZC5vYnRlbmVyRWxlbWVudG9DYXJkKCkpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBNdWVzdHJhIGVsIHBvc3RlciBhbCBkYXJsZSBjbGlja1xyXG4gKi9cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKGxpbmssIG5hbWUpIHtcclxuICBjb25zdCBwb3N0ZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2dyaWQtcG9zdGVyXCIpO1xyXG4gIGNvbnN0IHBvc3RlckJ1dHRvbiA9IHBvc3RlckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2dyaWQtcG9zdGVyLWNsb3NlXCIpO1xyXG4gIGNvbnN0IHBvc3RlckltYWdlRWxlbWVudCA9IHBvc3RlckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2dyaWQtcG9zdGVyLWltYWdlXCIpO1xyXG4gIGNvbnN0IHBvc3Rlck5hbWVFbGVtZW50ID0gcG9zdGVyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudF9fZ3JpZC1wb3N0ZXItbmFtZVwiKTtcclxuXHJcbiAgcG9zdGVySW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7XHJcbiAgcG9zdGVySW1hZ2VFbGVtZW50LmFsdCA9IG5hbWU7XHJcbiAgcG9zdGVyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG5cclxuICBwb3N0ZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZChcImNvbnRlbnRfX2dyaWQtcG9zdGVyLWVuYWJsZWRcIik7XHJcblxyXG4gIHBvc3RlckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgcG9zdGVyQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJjb250ZW50X19ncmlkLXBvc3Rlci1lbmFibGVkXCIpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFVzbyBkZWwgb2JqZXRvIHBvcHVwXHJcbiovIFxyXG5jb25zdCBwb3BVcENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIik7XHJcblxyXG5jb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2V4cGxvcmVyLWFkZC1lbmFibGVcIik7XHJcbmNvbnN0IHBvcHVwV2l0aEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwJywgYWRkQ2FyZCk7XHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gIHBvcHVwV2l0aEZvcm0ub3BlbigpO1xyXG59KTtcclxuXHJcblxyXG4vKlxyXG4qIE9iamV0byBxdWUgb2J0aWVuZSBsb3MgdmFsb3JlcyBkZWwgdXN1YXJpbyBcclxuKi9cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogJy5jb250ZW50X19leHBsb3Jlci1uYW1lJyxcclxuICBqb2JTZWxlY3RvcjogJy5jb250ZW50X19leHBsb3Jlci1qb2InXHJcbn0pO1xyXG4vKipcclxuICogVXNvIGRlbCBvYmpldG8gcG9wVXAgcGFyYSBsYSBlZGljaW9uXHJcbiAqL1xyXG5jb25zdCBlZGl0V2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0XCIpO1xyXG5jb25zdCBlZGl0Rm9ybSA9IGVkaXRXaW5kb3cucXVlcnlTZWxlY3RvcihcIiNlZGl0X193aW5kb3dcIik7XHJcbmNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2V4cGxvcmVyLWVkaXQtZW5hYmxlXCIpO1xyXG5jb25zdCBlZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oJyNlZGl0JyxlZGl0RXhwbG9yZXIpO1xyXG51c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgZWRpdC5vcGVuKCk7XHJcbiAgXHJcbn0pO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBBw7FhZGlyIHVuYSBudWV2YSBjYXJ0YVxyXG4gKi9cclxuY29uc3Qgc2F2ZUNhcmQgPSBwb3BVcENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX193aW5kb3ctZm9ybS1idXR0b25cIik7XHJcbmNvbnN0IHNhdmVFZGl0ID0gZWRpdFdpbmRvdy5xdWVyeVNlbGVjdG9yKFwiI2VkaXRfX3dpbmRvdy1mb3JtLWJ1dHRvblwiKTtcclxuXHJcbmZ1bmN0aW9uIGFkZENhcmQoKSB7XHJcbiAgbGV0IGltYWdlID0gcG9wVXBDb250YWluZXIucXVlcnlTZWxlY3RvcihcIiNwb3B1cF9fd2luZG93LWZvcm0tbGlua1wiKTtcclxuICBsZXQgbmFtZSA9IHBvcFVwQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXBfX3dpbmRvdy1mb3JtLXRpdGxlXCIpO1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIG5hbWUudmFsdWUsXHJcbiAgICBpbWFnZS52YWx1ZSxcclxuICAgIFwiLi9pbWFnZXMvVHJhc2guc3ZnXCIsXHJcbiAgICBcIiNjb250ZW50X19ncmlkXCIsXHJcbiAgICBoYW5kbGVDYXJkQ2xpY2tcclxuICApO1xyXG4gIGNvbnRlbmVkb3JfaW1hZ2VuZXMuYXBwZW5kQ2hpbGQoY2FyZC5vYnRlbmVyRWxlbWVudG9DYXJkKCkpO1xyXG4gIGltYWdlLnZhbHVlID0gXCJcIjtcclxuICBuYW1lLnZhbHVlID0gXCJcIjtcclxuICBwb3BVcENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfX2VuYWJsZWRcIik7XHJcbiAgfVxyXG5cclxuZnVuY3Rpb24gZWRpdEV4cGxvcmVyKCkge1xyXG4gIGxldCBuYW1lID0gZWRpdFdpbmRvdy5xdWVyeVNlbGVjdG9yKFwiI2VkaXRfX3dpbmRvdy1mb3JtLW5hbWVcIik7XHJcbiAgbGV0IGpvYiA9IGVkaXRXaW5kb3cucXVlcnlTZWxlY3RvcihcIiNlZGl0X193aW5kb3ctZm9ybS10aXRsZVwiKTtcclxuXHJcbiAgbGV0IG5hbWVFeHBsb3JlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY29udGVudF9fZXhwbG9yZXItbmFtZVwiKTtcclxuICBsZXQgam9iRXhwbG9yZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRfX2V4cGxvcmVyLWpvYlwiKTtcclxuXHJcbiAgbmFtZUV4cGxvcmVyLnRleHRDb250ZW50ID0gbmFtZS52YWx1ZTtcclxuICBqb2JFeHBsb3Jlci50ZXh0Q29udGVudCA9IGpvYi52YWx1ZTtcclxuICBlZGl0V2luZG93LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9fZW5hYmxlZFwiKTtcclxuICB9XHJcblxyXG5zYXZlQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgYWRkQ2FyZCk7XHJcbnNhdmVFZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlZGl0RXhwbG9yZXIpO1xyXG4iXSwibmFtZXMiOlsiQ2FyZCIsInRleHRvIiwiZW5sYWNlSW1hZ2VuIiwiZW5sYWNlSWNvbm9FbGltaW5hciIsInNlbGVjdG9yUGxhbnRpbGxhIiwiaGFuZGxlQ2FyZENsaWNrIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsInBsYW50aWxsYSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudG9DYXJkIiwiX2hhbmRsZUNhcmRDbGljayIsIl9pbmljaWFsaXphckNhcmQiLCJrZXkiLCJ2YWx1ZSIsIl9hZ3JlZ2FyRGF0b3MiLCJfYWdyZWdhckV2ZW50TGlzdGVuZXJzIiwidGV4dENvbnRlbnQiLCJzcmMiLCJfdGhpcyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUNsaWNrIiwiYmluZCIsIl9oYW5kbGVEZWxldGVDbGljayIsImV2dCIsInRhcmdldCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImN1cnJlbnRUYXJnZXQiLCJwYXJlbnROb2RlIiwicmVtb3ZlIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImNvbmNhdCIsImlkIiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJzb21lIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX1BvcHVwIiwiUG9wdXBXaXRoRm9ybSIsInBvcHVwU2VsZWN0b3IiLCJoYW5kbGVGb3JtU3VibWl0IiwiX2NhbGxTdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm0iLCJfcG9wdXAiLCJfaW5oZXJpdHMiLCJfdGhpczIiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwibmFtZSIsIl90aGlzMyIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJjYWxsIiwiX2dldElucHV0VmFsdWVzIiwiY29uc29sZSIsImxvZyIsInJlc2V0IiwiUG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJfY2xvc2VNb2RhbCIsInNldEV2ZW50TGlzdGVuZXJzIiwiX3BvcHVwU2F2ZUJ1dHRvbiIsIl9wb3B1cENsb3NlQnV0dG9uIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsb3NlIiwiY29udGFpbnMiLCJVc2VySW5mbyIsIl9yZWYiLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50Iiwiam9iIiwiX3JlZjIiLCJmb3JtU2VsZWN0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiaW5pdGlhbEltYWdlcyIsImxpbmsiLCJjb250ZW5lZG9yX2ltYWdlbmVzIiwicG9zdGVyQ29udGFpbmVyIiwicG9zdGVyQnV0dG9uIiwicG9zdGVySW1hZ2VFbGVtZW50IiwicG9zdGVyTmFtZUVsZW1lbnQiLCJhbHQiLCJlbGVtZW50IiwiY2FyZCIsImFwcGVuZENoaWxkIiwib2J0ZW5lckVsZW1lbnRvQ2FyZCIsInBvcFVwQ29udGFpbmVyIiwiYWRkQnV0dG9uIiwicG9wdXBXaXRoRm9ybSIsImFkZENhcmQiLCJvcGVuIiwidXNlckluZm8iLCJlZGl0V2luZG93IiwiZWRpdEJ1dHRvbiIsImVkaXQiLCJlZGl0RXhwbG9yZXIiLCJnZXRVc2VySW5mbyIsInNhdmVDYXJkIiwic2F2ZUVkaXQiLCJpbWFnZSIsIm5hbWVFeHBsb3JlciIsImpvYkV4cGxvcmVyIl0sInNvdXJjZVJvb3QiOiIifQ==